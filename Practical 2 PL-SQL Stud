-- CREATE TABLES
CREATE TABLE Stud_Marks (
    name VARCHAR(50),
    total_marks INT
);

CREATE TABLE Result (
    roll INT PRIMARY KEY,
    name VARCHAR(50),
    class VARCHAR(50)
);

-- INSERT DATA
INSERT INTO Stud_Marks VALUES ('Riya', 1200);
INSERT INTO Stud_Marks VALUES ('Aman', 950);
INSERT INTO Stud_Marks VALUES ('Sana', 880);
INSERT INTO Stud_Marks VALUES ('Nitin', 830);

-- CREATE PROCEDURE
DELIMITER $$

CREATE PROCEDURE proc_Grade(IN p_name VARCHAR(50), IN p_roll INT)
BEGIN
    DECLARE v_marks INT;
    DECLARE v_class VARCHAR(30);

    SELECT total_marks INTO v_marks
    FROM Stud_Marks
    WHERE name = p_name;

    IF v_marks BETWEEN 990 AND 1500 THEN
        SET v_class = 'Distinction';
    ELSEIF v_marks BETWEEN 900 AND 989 THEN
        SET v_class = 'First Class';
    ELSEIF v_marks BETWEEN 825 AND 899 THEN
        SET v_class = 'Higher Second Class';
    ELSE
        SET v_class = 'Fail';
    END IF;

    INSERT INTO Result(roll, name, class)
    VALUES(p_roll, p_name, v_class);
END $$

DELIMITER ;

-- CALL PROCEDURE FOR ALL STUDENTS
CALL proc_Grade('Riya', 1);
CALL proc_Grade('Aman', 2);
CALL proc_Grade('Sana', 3);
CALL proc_Grade('Nitin', 4);

-- SHOW RESULT
SELECT * FROM Result;
